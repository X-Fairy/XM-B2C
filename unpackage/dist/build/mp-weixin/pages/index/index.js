(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"62fc":function(t,e,o){"use strict";o.r(e);var n=o("98d9"),i=o.n(n);for(var a in n)"default"!==a&&function(t){o.d(e,t,function(){return n[t]})}(a);e["default"]=i.a},"6e40":function(t,e,o){"use strict";var n={modal:()=>o.e("components/modal/modal").then(o.bind(null,"8214"))},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.modalShow=!1},t.e1=function(e){t.modalShow=!1})},a=[];o.d(e,"b",function(){return i}),o.d(e,"c",function(){return a}),o.d(e,"a",function(){return n})},"87f7":function(t,e,o){"use strict";var n=o("fdd9"),i=o.n(n);i.a},"98d9":function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(o("f7d8")),i=s(o("f7d0")),a=o("5df8");function s(t){return t&&t.__esModule?t:{default:t}}var r=function(){return o.e("components/modal/modal").then(o.bind(null,"8214"))},c=function(){return o.e("components/icon/icon").then(o.bind(null,"be58"))},u={components:{modal:r,tuiIcon:c},data:function(){return{getheight:"",specialImgHeight:"",storeName:"总部旗舰店",address:"",city:"",id:"",secret:{},showHeader:!0,afterHeaderOpacity:1,headerPosition:"fixed",headerTop:null,statusTop:null,nVueTitle:null,currentSwiper:0,swiperList:[],actionBanner:[],categoryList:[{id:1,name:"家具百货",img:"/static/img/category/1.png"},{id:12,name:"健康美容",img:"/static/img/category/2.png"},{id:17,name:"饰品系列",img:"/static/img/category/3.png"},{id:34,name:"季节产品",img:"/static/img/category/4.png"},{id:46,name:"精美包饰",img:"/static/img/category/5.png"},{id:61,name:"毛绒公仔",img:"/static/img/category/6.png"},{id:66,name:"数码配件",img:"/static/img/category/10.png"},{id:27,name:"文体礼品",img:"/static/img/category/7.png"},{id:55,name:"儿童玩具",img:"/static/img/category/8.png"},{id:74,name:"休闲零食",img:"/static/img/category/9.png"}],seckillList:[],Promotion:[],productList:[],specialList:[],loadingText:"到底了",amapPlugin:null,modalShow:!1,storeItems:[{store_name:"总部旗舰店",desc:"由总部统一发货",store_code:"10001"}],store:"10001",hint:"熙美诚品",popup:{},scrollLeft:0}},onPageScroll:function(t){this.headerPosition=t.scrollTop>=0?"fixed":"absolute",this.headerTop=t.scrollTop>=0?null:0,this.statusTop=t.scrollTop>=0?null:-this.statusHeight+"px"},onPullDownRefresh:function(){this.getgoods(),setTimeout(function(){t.stopPullDownRefresh()},1e3)},onLoad:function(){this.getgoods(),this.getLocation()},onShow:function(){console.log(t.getStorageSync("store")),t.getStorageSync("store")&&(this.storeName=t.getStorageSync("store").store_name,this.store=t.getStorageSync("store").store_code,this.getgoods())},methods:{getLocation:function(){var e=this;t.getLocation({success:function(t){e.getCity(t.latitude,t.longitude)},fail:function(t){console.log(t)}})},getCity:function(e,o){var i=this,a=new n.default({key:"LVHBZ-SOY6W-Z5URP-OC34Q-CLWZH-Y6BCX"});a.reverseGeocoder({location:{latitude:e,longitude:o},success:function(e){console.log(e),i.city=e.result.ad_info.city;var o=e.result.location.lat,n=e.result.location.lng;i.address=e.result.address,t.setStorageSync("local",e.result.address);var a={city:i.city,from:o+","+n};i.$xm.post("/Index/getStoreList",a,function(e){i.storeItems=e.data,t.setStorageSync("storeList",e.data)})},fail:function(t){console.log(t)},complete:function(t){}})},getgoods:function(){var e=this;this.swiperList=[];var o=(new Date).getTime(),n=i.default.hex_md5("XM#"+i.default.hex_md5(String(o))+"@secret"),s={store:this.store,secret:o,timestamp:n};(0,a.ajax)({url:"/Index/getInfo",method:"post",data:s,success:function(o){var n=o.data;console.log(n),e.popup=n.popup,t.getStorageSync("store")?e.modalShow=!1:""!=n.popup.img?e.modalShow=!0:e.modalShow=!1,e.getheight=n.banner[0].height+"rpx",e.specialImgHeight=n.special.height+"rpx",e.hint=n.hint,t.setNavigationBarTitle({title:e.hint}),e.swiperList=n.banner,e.swiperList.map(function(t){t.img=n._URL_+t.img}),e.actionBanner=n.img,n.faddish.forEach(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.Promotion=n.faddish,e.seckillList=n.bargain,e.productList=n.rem,e.seckillList.forEach(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.productList.forEach(function(t){t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300",t.itemcount=0,t.pro_name.length}),n.special.goods.map(function(t){t.itemcount=0,t.pro_sn="http://img.xmvogue.com/thumb/"+t.pro_sn+".jpg?x-oss-process=style/300"}),e.specialList=n.special}})},scroll:function(t){this.scrollLeft=t.detail.scrollLeft},toSearch:function(){t.navigateTo({url:"../search/search/search"})},toPet:function(){},toSwiper:function(e){var o=e.src.split("@");switch(o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":t.navigateTo({});break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":t.navigateTo({url:"../webViwe/webViwe?url="+o[1]});break;default:}},toPage:function(e){console.log(e);var o=e.url.split("@");switch(console.log(o),o[0]){case"product":t.navigateTo({url:"../goods/goods?gid="+o[1]});break;case"news":break;case"sort":break;case"player":t.navigateTo({url:"plugin-private://wx2b03c6e691cd7370/pages/live-player-plugin?room_id="+o[1]});break;case"open":console.log(1),t.navigateTo({url:"../webViwe/webViwe/webViwe?url="+o[1]});break;default:}},toCategory:function(e){t.setStorageSync("cateSelect",e.id),t.switchTab({url:"../tabBar/category/category"})},toGoods:function(e){t.navigateTo({url:"../goods/goods?gid="+e.id})},swiperChange:function(t){this.currentSwiper=t.detail.current},tobuy:function(t){t.itemcount++,this.id=t.id,this.joinCart()},joinCart:function(){var e=this,o={proid:this.id,pronum:1};this.$xm.post("/Cart/add",o,function(o){var n=o.msg;"加入购物车成功"==n&&t.showToast({title:"已加入购物车"}),e.$xm.post("/Cart","",function(e){t.setStorage({key:"cart",data:e.count,success:function(e){t.getStorage({key:"cart",success:function(e){var o=e.data;null!==e.data&&(o=o.toString(),t.setTabBarBadge({index:2,text:o}))}})}})})})},toConfirmation:function(){t.navigateTo({url:"../order/confirmation"})},toStore:function(){t.navigateTo({url:"../store/store/store"})},toactivity:function(){}}};e.default=u}).call(this,o("543d")["default"])},f3ec:function(t,e,o){"use strict";(function(t){o("e146"),o("921b");n(o("66fd"));var e=n(o("f803"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("543d")["createPage"])},f803:function(t,e,o){"use strict";o.r(e);var n=o("6e40"),i=o("62fc");for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);o("87f7");var s,r=o("f0c5"),c=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],s);e["default"]=c.exports},fdd9:function(t,e,o){}},[["f3ec","common/runtime","common/vendor"]]]);